<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Importing and Cleaning Data • blackstone</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Importing and Cleaning Data">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">blackstone</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/blackstone.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/setup_projects.html">Setup and RStudio Projects</a></li>
    <li><a class="dropdown-item" href="../articles/import_clean.html">Importing and Cleaning Data</a></li>
    <li><a class="dropdown-item" href="../articles/analysis.html">Data Analysis and Statistical Inference</a></li>
    <li><a class="dropdown-item" href="../articles/data_visualization.html">Data Visualization</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/zwcrowley/blackstone/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Importing and Cleaning Data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/zwcrowley/blackstone/blob/main/vignettes/import_clean.Rmd" class="external-link"><code>vignettes/import_clean.Rmd</code></a></small>
      <div class="d-none name"><code>import_clean.Rmd</code></div>
    </div>

    
    
<p><code>blackstone</code> contains many functions for importing and
cleaning data. This vignette shows you:</p>
<ul>
<li><p>How to create a codebook for SurveyMonkey data.</p></li>
<li><p>How edit the codebook and use it to read in SurveyMonkey
data.</p></li>
<li><p>How to merge data from different time points (pre-post
data).</p></li>
<li><p>How to clean a dataset and make sure all variables are the
correct type for analysis.</p></li>
</ul>
<p>We’ll start by loading <code>blackstone</code>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/zwcrowley/blackstone" class="external-link">blackstone</a></span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="data-cleaning-and-manipulation">Data Cleaning and Manipulation<a class="anchor" aria-label="anchor" href="#data-cleaning-and-manipulation"></a>
</h2>
<div class="section level3">
<h3 id="importing-data-from-surveymonkey">Importing data from SurveyMonkey<a class="anchor" aria-label="anchor" href="#importing-data-from-surveymonkey"></a>
</h3>
<p>Our current survey provider is <a href="https://www.surveymonkey.com/?ut_source=homepage&amp;ut_source3=header" class="external-link">SurveyMonkey</a>,
<code>blackstone</code> contains several functions that makes the
process of reading SurveyMonkey data into <code>R</code> a more
manageable process and creates a codebook for the data along the
way.</p>
<p>SurveyMonkey exports data with two header rows, which does not work
with <code>R</code> where tibbles and dataframes can only have one row
of names.</p>
<p>Here is how to import data from SurveyMonkey using example data
provided with <code>blackstone</code>, this is a fake dataset of a pre
(baseline) survey. There are three steps to this process:</p>
<ol style="list-style-type: decimal">
<li>Create a codebook.</li>
<li>Edit and save the codebook to create meaningful variable names.</li>
<li>Read in the data and rename the variables with the codebook.</li>
</ol>
</div>
<div class="section level3">
<h3 id="pre-survey-data">Pre Survey Data<a class="anchor" aria-label="anchor" href="#pre-survey-data"></a>
</h3>
<div class="section level4">
<h4 id="creating-the-codebook">1. Creating the codebook<a class="anchor" aria-label="anchor" href="#creating-the-codebook"></a>
</h4>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># File path for pre example data:</span></span>
<span><span class="va">pre_data_fp</span> <span class="op">&lt;-</span> <span class="fu">blackstone</span><span class="fu">::</span><span class="fu"><a href="../reference/blackstoneExample.html">blackstoneExample</a></span><span class="op">(</span><span class="st">"sm_data_pre.csv"</span><span class="op">)</span></span>
<span><span class="co"># 1. Create the codebook:</span></span>
<span><span class="va">codebook_pre</span> <span class="op">&lt;-</span> <span class="fu">blackstone</span><span class="fu">::</span><span class="fu"><a href="../reference/createCodebook.html">createCodebook</a></span><span class="op">(</span><span class="va">pre_data_fp</span><span class="op">)</span></span>
<span><span class="va">codebook_pre</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 5</span></span></span>
<span><span class="co">#&gt;   header_1      header_2 combined_header position variable_name</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Respondent ID <span style="color: #BB0000;">NA</span>       Respondent ID          1 respondent_id</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Collector ID  <span style="color: #BB0000;">NA</span>       Collector ID           2 collector_id </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Start Date    <span style="color: #BB0000;">NA</span>       Start Date             3 start_date   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> End Date      <span style="color: #BB0000;">NA</span>       End Date               4 end_date     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> IP Address    <span style="color: #BB0000;">NA</span>       IP Address             5 ip_address   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 27 more rows</span></span></span></code></pre></div>
<p>For this codebook, the first column <code>header_1</code> is the
first header from the SurveyMonkey data, the second column
<code>header_2</code> is the second header, the third column
<code>combined_header</code> is the combination of the two headers,
<code>position</code> is the column number position for each
<code>combined_header</code>, and <code>variable_name</code> is a
cleaned up version for <code>combined_header</code> and will be the
column to edit to change the column names later on to shorter and more
meaningful names.</p>
<p><code>variable_name</code> will be the column that renames all the
variables in the SurveyMonkey data.</p>
</div>
<div class="section level4">
<h4 id="editing-and-saving-the-codebook">2. Editing and Saving the Codebook<a class="anchor" aria-label="anchor" href="#editing-and-saving-the-codebook"></a>
</h4>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Step 2. Edit the codebook: </span></span>
<span><span class="co"># Set up sequential naming convections for matrix-style questions with shared likert scale response options:</span></span>
<span><span class="co"># 8 items that are matrix-style likert scales- turned into a scale called `research`- here is how to easily name them all at once:</span></span>
<span><span class="co"># Rows 11 to 18 belong to the "research" matrix question (you will have to look at the codebook and match the header_1 and header_2 to variable_name to change)</span></span>
<span><span class="va">research_items</span> <span class="op">&lt;-</span> <span class="va">codebook_pre</span><span class="op">[[</span><span class="st">"variable_name"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">11</span><span class="op">:</span><span class="fl">18</span><span class="op">]</span></span>
<span><span class="va">research_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"research_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">research_items</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">research_items</span><span class="op">)</span> <span class="co"># Create a new named vector of names for these columns</span></span>
<span><span class="co"># 6 items that are matrix-style likert scales- turned into a scale called `ability`- Rows 19 to 24 named `variable_name`:</span></span>
<span><span class="va">ability_items</span> <span class="op">&lt;-</span> <span class="va">codebook_pre</span><span class="op">[[</span><span class="st">"variable_name"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">19</span><span class="op">:</span><span class="fl">24</span><span class="op">]</span></span>
<span><span class="va">ability_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"ability_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">ability_items</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">ability_items</span><span class="op">)</span> <span class="co"># Create a new named vector of names for these columns</span></span>
<span><span class="co"># 6 items that are matrix-style likert scales- turned into a scale called `ethics`- Rows 19 to 24 named `variable_name`:</span></span>
<span><span class="va">ethics_items</span> <span class="op">&lt;-</span> <span class="va">codebook_pre</span><span class="op">[[</span><span class="st">"variable_name"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">25</span><span class="op">:</span><span class="fl">29</span><span class="op">]</span></span>
<span><span class="va">ethics_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"ethics_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">ethics_items</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">ethics_items</span><span class="op">)</span> <span class="co"># Create a new named vector of names for these columns</span></span>
<span><span class="co"># Edit the `variable_names` column: Use dplyr::mutate() and dplyr::case_match() to change the column `variable_name`:</span></span>
<span><span class="va">codebook_pre</span> <span class="op">&lt;-</span> <span class="va">codebook_pre</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    variable_name <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_match.html" class="external-link">case_match</a></span><span class="op">(</span></span>
<span>        <span class="va">variable_name</span>, <span class="co"># column to match</span></span>
<span>        <span class="st">'custom_data_1'</span> <span class="op">~</span> <span class="st">"unique_id"</span>, <span class="co"># changes 'custom_data_1' to "unique_id"</span></span>
<span>        <span class="st">'to_what_extent_are_you_knowledgeable_in_conducting_research_in_your_field_of_study'</span> <span class="op">~</span> <span class="st">"knowledge"</span>,</span>
<span>        <span class="st">'with_which_gender_do_you_most_closely_identify'</span> <span class="op">~</span> <span class="st">"gender"</span>,</span>
<span>        <span class="st">'which_race_ethnicity_best_describes_you_please_choose_only_one'</span> <span class="op">~</span> <span class="st">"ethnicity"</span>,</span>
<span>        <span class="st">'are_you_a_first_generation_college_student'</span> <span class="op">~</span> <span class="st">"first_gen"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">research_names</span><span class="op">)</span> <span class="op">~</span> <span class="va">research_names</span><span class="op">[</span><span class="va">variable_name</span><span class="op">]</span>, <span class="co"># takes the above named vector and when the name matches, applies new value in that position as replacement.</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ability_names</span><span class="op">)</span> <span class="op">~</span> <span class="va">ability_names</span><span class="op">[</span><span class="va">variable_name</span><span class="op">]</span>,   <span class="co"># Same for `ability_names`</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ethics_names</span><span class="op">)</span> <span class="op">~</span> <span class="va">ethics_names</span><span class="op">[</span><span class="va">variable_name</span><span class="op">]</span>,   <span class="co"># Same for `ability_names`</span></span>
<span>        .default <span class="op">=</span> <span class="va">variable_name</span> <span class="co"># returns default value from original `variable_name` if not changed.</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="va">codebook_pre</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 32 × 5</span></span></span>
<span><span class="co">#&gt;   header_1      header_2 combined_header position variable_name</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Respondent ID <span style="color: #BB0000;">NA</span>       Respondent ID          1 respondent_id</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Collector ID  <span style="color: #BB0000;">NA</span>       Collector ID           2 collector_id </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Start Date    <span style="color: #BB0000;">NA</span>       Start Date             3 start_date   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> End Date      <span style="color: #BB0000;">NA</span>       End Date               4 end_date     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> IP Address    <span style="color: #BB0000;">NA</span>       IP Address             5 ip_address   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 27 more rows</span></span></span>
<span></span>
<span><span class="co"># Write out the edited codebook to save for future use-</span></span>
<span><span class="co"># Be sure to double check questions match new names before writing out:</span></span>
<span><span class="co"># readr::write_csv(codebook_pre, file = "{filepath-to-codebok}")</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="import-the-data-and-rename-the-variables-with-the-codebook">3. Import the Data and Rename the Variables with the Codebook<a class="anchor" aria-label="anchor" href="#import-the-data-and-rename-the-variables-with-the-codebook"></a>
</h4>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 3. Read in the data and rename the vars using readRenameData(), passing the file path and the edited codebook:</span></span>
<span><span class="va">pre_data</span> <span class="op">&lt;-</span> <span class="fu">blackstone</span><span class="fu">::</span><span class="fu"><a href="../reference/readRenameData.html">readRenameData</a></span><span class="op">(</span><span class="va">pre_data_fp</span>, codebook <span class="op">=</span> <span class="va">codebook_pre</span><span class="op">)</span></span>
<span><span class="va">pre_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 32</span></span></span>
<span><span class="co">#&gt;   respondent_id collector_id start_date end_date   ip_address      email_address</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>001    431<span style="text-decoration: underline;">822</span>954 2024-06-05 2024-06-06 227.224.138.113 coraima59@me…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>002    431<span style="text-decoration: underline;">822</span>954 2024-06-21 2024-06-22 110.241.132.50  mstamm@hermi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>003    431<span style="text-decoration: underline;">822</span>954 2024-06-14 2024-06-15 165.58.112.64   precious.fei…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>004    431<span style="text-decoration: underline;">822</span>954 2024-06-15 2024-06-16 49.34.121.147   ines52@gmail…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>005    431<span style="text-decoration: underline;">822</span>954 2024-06-15 2024-06-16 115.233.66.80   franz44@hotm…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 95 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 26 more variables: first_name &lt;chr&gt;, last_name &lt;chr&gt;, unique_id &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   knowledge &lt;chr&gt;, research_1 &lt;chr&gt;, research_2 &lt;chr&gt;, research_3 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   research_4 &lt;chr&gt;, research_5 &lt;chr&gt;, research_6 &lt;chr&gt;, research_7 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   research_8 &lt;chr&gt;, ability_1 &lt;chr&gt;, ability_2 &lt;chr&gt;, ability_3 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ability_4 &lt;chr&gt;, ability_5 &lt;chr&gt;, ability_6 &lt;chr&gt;, ethics_1 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ethics_2 &lt;chr&gt;, ethics_3 &lt;chr&gt;, ethics_4 &lt;chr&gt;, ethics_5 &lt;chr&gt;, …</span></span></span></code></pre></div>
<p>The SurveyMonkey example data is now imported with names taken from
the codebook column <code>variable_name</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">pre_data</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "respondent_id" "collector_id"  "start_date"    "end_date"     </span></span>
<span><span class="co">#&gt;  [5] "ip_address"    "email_address" "first_name"    "last_name"    </span></span>
<span><span class="co">#&gt;  [9] "unique_id"     "knowledge"     "research_1"    "research_2"   </span></span>
<span><span class="co">#&gt; [13] "research_3"    "research_4"    "research_5"    "research_6"   </span></span>
<span><span class="co">#&gt; [17] "research_7"    "research_8"    "ability_1"     "ability_2"    </span></span>
<span><span class="co">#&gt; [21] "ability_3"     "ability_4"     "ability_5"     "ability_6"    </span></span>
<span><span class="co">#&gt; [25] "ethics_1"      "ethics_2"      "ethics_3"      "ethics_4"     </span></span>
<span><span class="co">#&gt; [29] "ethics_5"      "gender"        "ethnicity"     "first_gen"</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="post-survey-data">Post Survey Data<a class="anchor" aria-label="anchor" href="#post-survey-data"></a>
</h3>
<ul>
<li><p>Do that same process over again with the post data, if the
variables are all the same you can use the same codebook.</p></li>
<li><p>For this example there are additional post variables so a new
codebook will need to be created to rename the variables when reading in
the data with <code><a href="../reference/readRenameData.html">readRenameData()</a></code>.</p></li>
</ul>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># File path for pre example data:</span></span>
<span><span class="va">post_data_fp</span> <span class="op">&lt;-</span> <span class="fu">blackstone</span><span class="fu">::</span><span class="fu"><a href="../reference/blackstoneExample.html">blackstoneExample</a></span><span class="op">(</span><span class="st">"sm_data_post.csv"</span><span class="op">)</span></span>
<span><span class="co"># 1. Create the codebook using the filepath:</span></span>
<span><span class="va">codebook_post</span> <span class="op">&lt;-</span> <span class="fu">blackstone</span><span class="fu">::</span><span class="fu"><a href="../reference/createCodebook.html">createCodebook</a></span><span class="op">(</span><span class="va">post_data_fp</span><span class="op">)</span></span>
<span><span class="va">codebook_post</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 37 × 5</span></span></span>
<span><span class="co">#&gt;   header_1      header_2 combined_header position variable_name</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Respondent ID <span style="color: #BB0000;">NA</span>       Respondent ID          1 respondent_id</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Collector ID  <span style="color: #BB0000;">NA</span>       Collector ID           2 collector_id </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Start Date    <span style="color: #BB0000;">NA</span>       Start Date             3 start_date   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> End Date      <span style="color: #BB0000;">NA</span>       End Date               4 end_date     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> IP Address    <span style="color: #BB0000;">NA</span>       IP Address             5 ip_address   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 32 more rows</span></span></span>
<span></span>
<span><span class="co"># Step 2. Edit the codebook: </span></span>
<span><span class="co"># Set up sequential naming convections for matrix-style questions with shared likert scale response options:</span></span>
<span><span class="co"># 8 items that are matrix-style likert scales- turned into a scale called `research`- here is how to easily name them all at once:</span></span>
<span><span class="co"># Rows 11 to 18 belong to the "research" matrix question (you will have to look at the codebook and match the header_1 and header_2 to variable_name to change)</span></span>
<span><span class="va">research_items</span> <span class="op">&lt;-</span> <span class="va">codebook_post</span><span class="op">[[</span><span class="st">"variable_name"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">11</span><span class="op">:</span><span class="fl">18</span><span class="op">]</span></span>
<span><span class="va">research_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"research_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">research_items</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">research_items</span><span class="op">)</span> <span class="co"># Create a new named vector of names for these columns</span></span>
<span><span class="co"># 6 items that are matrix-style likert scales- turned into a scale called `ability`- Rows 19 to 24 named `variable_name`:</span></span>
<span><span class="va">ability_items</span> <span class="op">&lt;-</span> <span class="va">codebook_post</span><span class="op">[[</span><span class="st">"variable_name"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">19</span><span class="op">:</span><span class="fl">24</span><span class="op">]</span></span>
<span><span class="va">ability_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"ability_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">ability_items</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">ability_items</span><span class="op">)</span> <span class="co"># Create a new named vector of names for these columns</span></span>
<span><span class="co"># 6 items that are matrix-style likert scales- turned into a scale called `ethics`- Rows 19 to 24 named `variable_name`:</span></span>
<span><span class="va">ethics_items</span> <span class="op">&lt;-</span> <span class="va">codebook_post</span><span class="op">[[</span><span class="st">"variable_name"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">25</span><span class="op">:</span><span class="fl">29</span><span class="op">]</span></span>
<span><span class="va">ethics_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"ethics_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">ethics_items</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">ethics_items</span><span class="op">)</span> <span class="co"># Create a new named vector of names for these columns</span></span>
<span><span class="co"># 5 items that are Open-ended follow up when corresponeding ethics items were answered "Strongly disagree"or "Disagree"- Rows 30 to 34 named `variable_name`:</span></span>
<span><span class="va">ethics_items_oe</span> <span class="op">&lt;-</span> <span class="va">codebook_post</span><span class="op">[[</span><span class="st">"variable_name"</span><span class="op">]</span><span class="op">]</span><span class="op">[</span><span class="fl">30</span><span class="op">:</span><span class="fl">34</span><span class="op">]</span></span>
<span><span class="va">ethics_names_oe</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"ethics_"</span>, <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">ethics_items</span><span class="op">)</span>, <span class="st">"_oe"</span><span class="op">)</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://rlang.r-lib.org/reference/set_names.html" class="external-link">set_names</a></span><span class="op">(</span><span class="va">.</span>, <span class="va">ethics_items_oe</span><span class="op">)</span> <span class="co"># Create a new named vector of names for these columns</span></span>
<span><span class="co"># Edit the `variable_names` column: Use dplyr::mutate() and dplyr::case_match() to change the column `variable_name`:</span></span>
<span><span class="va">codebook_post</span> <span class="op">&lt;-</span> <span class="va">codebook_post</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    variable_name <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_match.html" class="external-link">case_match</a></span><span class="op">(</span></span>
<span>        <span class="va">variable_name</span>, <span class="co"># column to match</span></span>
<span>        <span class="st">'custom_data_1'</span> <span class="op">~</span> <span class="st">"unique_id"</span>, <span class="co"># changes 'custom_data_1' to "unique_id"</span></span>
<span>        <span class="st">'to_what_extent_are_you_knowledgeable_in_conducting_research_in_your_field_of_study'</span> <span class="op">~</span> <span class="st">"knowledge"</span>,</span>
<span>        <span class="st">'with_which_gender_do_you_most_closely_identify'</span> <span class="op">~</span> <span class="st">"gender"</span>,</span>
<span>        <span class="st">'which_race_ethnicity_best_describes_you_please_choose_only_one'</span> <span class="op">~</span> <span class="st">"ethnicity"</span>,</span>
<span>        <span class="st">'are_you_a_first_generation_college_student'</span> <span class="op">~</span> <span class="st">"first_gen"</span>,</span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">research_names</span><span class="op">)</span> <span class="op">~</span> <span class="va">research_names</span><span class="op">[</span><span class="va">variable_name</span><span class="op">]</span>, <span class="co"># takes the above named vector and when the name matches, applies new value in that position as replacement.</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ability_names</span><span class="op">)</span> <span class="op">~</span> <span class="va">ability_names</span><span class="op">[</span><span class="va">variable_name</span><span class="op">]</span>,   <span class="co"># Same for `ability_names`</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ethics_names</span><span class="op">)</span> <span class="op">~</span> <span class="va">ethics_names</span><span class="op">[</span><span class="va">variable_name</span><span class="op">]</span>,   <span class="co"># Same for `ability_names`</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ethics_names_oe</span><span class="op">)</span> <span class="op">~</span> <span class="va">ethics_names_oe</span><span class="op">[</span><span class="va">variable_name</span><span class="op">]</span>,   <span class="co"># Same for `ethics_names_oe`</span></span>
<span>        .default <span class="op">=</span> <span class="va">variable_name</span> <span class="co"># returns default value from original `variable_name` if not changed.</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="va">codebook_post</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 37 × 5</span></span></span>
<span><span class="co">#&gt;   header_1      header_2 combined_header position variable_name</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> Respondent ID <span style="color: #BB0000;">NA</span>       Respondent ID          1 respondent_id</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> Collector ID  <span style="color: #BB0000;">NA</span>       Collector ID           2 collector_id </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> Start Date    <span style="color: #BB0000;">NA</span>       Start Date             3 start_date   </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> End Date      <span style="color: #BB0000;">NA</span>       End Date               4 end_date     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> IP Address    <span style="color: #BB0000;">NA</span>       IP Address             5 ip_address   </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 32 more rows</span></span></span>
<span><span class="co"># Write out the edited codebook to save for future use-</span></span>
<span><span class="co"># Be sure to double check questions match new names before writing out:</span></span>
<span><span class="co"># readr::write_csv(codebook_post, file = "{filepath-to-codebok}")</span></span>
<span><span class="co"># 3. Read in the data and rename the vars using readRenameData(), passing the file path and the edited codebook:</span></span>
<span><span class="va">post_data</span> <span class="op">&lt;-</span> <span class="fu">blackstone</span><span class="fu">::</span><span class="fu"><a href="../reference/readRenameData.html">readRenameData</a></span><span class="op">(</span><span class="va">post_data_fp</span>, codebook <span class="op">=</span> <span class="va">codebook_post</span><span class="op">)</span></span>
<span><span class="va">post_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 37</span></span></span>
<span><span class="co">#&gt;   respondent_id collector_id start_date end_date   ip_address      email_address</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>001    431<span style="text-decoration: underline;">822</span>954 2024-06-05 2024-06-06 227.224.138.113 coraima59@me…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>002    431<span style="text-decoration: underline;">822</span>954 2024-06-21 2024-06-22 110.241.132.50  mstamm@hermi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>003    431<span style="text-decoration: underline;">822</span>954 2024-06-14 2024-06-15 165.58.112.64   precious.fei…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>004    431<span style="text-decoration: underline;">822</span>954 2024-06-15 2024-06-16 49.34.121.147   ines52@gmail…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>005    431<span style="text-decoration: underline;">822</span>954 2024-06-15 2024-06-16 115.233.66.80   franz44@hotm…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 95 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 31 more variables: first_name &lt;chr&gt;, last_name &lt;chr&gt;, unique_id &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   knowledge &lt;chr&gt;, research_1 &lt;chr&gt;, research_2 &lt;chr&gt;, research_3 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   research_4 &lt;chr&gt;, research_5 &lt;chr&gt;, research_6 &lt;chr&gt;, research_7 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   research_8 &lt;chr&gt;, ability_1 &lt;chr&gt;, ability_2 &lt;chr&gt;, ability_3 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ability_4 &lt;chr&gt;, ability_5 &lt;chr&gt;, ability_6 &lt;chr&gt;, ethics_1 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   ethics_2 &lt;chr&gt;, ethics_3 &lt;chr&gt;, ethics_4 &lt;chr&gt;, ethics_5 &lt;chr&gt;, …</span></span></span></code></pre></div>
<p>Finally, it is important to add <code>pre_</code> and
<code>post_</code> prefixes to all unique variables before merging the
datasets, (i.e. the survey items that differ pre-post- the SM items and
demos are identical):</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Pre data:</span></span>
<span><span class="va">pre_data</span> <span class="op">&lt;-</span> <span class="va">pre_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename_with</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"pre_"</span>, <span class="va">.</span><span class="op">)</span>, .cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">knowledge</span><span class="op">:</span><span class="va">ethics_5</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Pre data:</span></span>
<span><span class="va">post_data</span> <span class="op">&lt;-</span> <span class="va">post_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/rename.html" class="external-link">rename_with</a></span><span class="op">(</span><span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"post_"</span>, <span class="va">.</span><span class="op">)</span>, .cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">knowledge</span><span class="op">:</span><span class="va">ethics_5_oe</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="merging-data">Merging Data<a class="anchor" aria-label="anchor" href="#merging-data"></a>
</h3>
<p>Merge pre-post data by joining on all the variables that are shared
in common.</p>
<p>The <a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a> package has many <a href="https://dplyr.tidyverse.org/articles/two-table.html" class="external-link">joining
functions</a>, the most commonly use is <code><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">dplyr::left_join()</a></code>
which keeps all the observations from the first table provided and
merges all observations from the second that match.</p>
<p>For most data analysis, we will want to use the post data as the
primary table and merge all the pre data since most post surveys drop
some participants, so we can run our analysis on complete data.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># left_join() will automatically join by all the shared columns, be sure to include all shared variables that should be identical pre-post to the 'by = join_by()' as an arg</span></span>
<span><span class="co"># (otherwise you will get a message about additional variables to be joined by):</span></span>
<span><span class="va">sm_data</span> <span class="op">&lt;-</span> <span class="va">post_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">pre_data</span>, by <span class="op">=</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/join_by.html" class="external-link">join_by</a></span><span class="op">(</span><span class="va">respondent_id</span>, <span class="va">collector_id</span>, <span class="va">start_date</span>, <span class="va">end_date</span>, <span class="va">ip_address</span>, <span class="va">email_address</span>, </span>
<span>                                                                        <span class="va">first_name</span>, <span class="va">last_name</span>, <span class="va">unique_id</span>, <span class="va">gender</span>, <span class="va">ethnicity</span>, <span class="va">first_gen</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">sm_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 57</span></span></span>
<span><span class="co">#&gt;   respondent_id collector_id start_date end_date   ip_address      email_address</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>001    431<span style="text-decoration: underline;">822</span>954 2024-06-05 2024-06-06 227.224.138.113 coraima59@me…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>002    431<span style="text-decoration: underline;">822</span>954 2024-06-21 2024-06-22 110.241.132.50  mstamm@hermi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>003    431<span style="text-decoration: underline;">822</span>954 2024-06-14 2024-06-15 165.58.112.64   precious.fei…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>004    431<span style="text-decoration: underline;">822</span>954 2024-06-15 2024-06-16 49.34.121.147   ines52@gmail…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>005    431<span style="text-decoration: underline;">822</span>954 2024-06-15 2024-06-16 115.233.66.80   franz44@hotm…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 95 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 51 more variables: first_name &lt;chr&gt;, last_name &lt;chr&gt;, unique_id &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_knowledge &lt;chr&gt;, post_research_1 &lt;chr&gt;, post_research_2 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_research_3 &lt;chr&gt;, post_research_4 &lt;chr&gt;, post_research_5 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_research_6 &lt;chr&gt;, post_research_7 &lt;chr&gt;, post_research_8 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_ability_1 &lt;chr&gt;, post_ability_2 &lt;chr&gt;, post_ability_3 &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_ability_4 &lt;chr&gt;, post_ability_5 &lt;chr&gt;, post_ability_6 &lt;chr&gt;, …</span></span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="data-cleaning">Data Cleaning<a class="anchor" aria-label="anchor" href="#data-cleaning"></a>
</h3>
<ul>
<li><p>Convert all likert scales to factors (for ordering) and all
demographics.</p></li>
<li><p>Create numeric variables from the factor variables for use with
statistical tests later on.</p></li>
<li><p>If applicable, drop all “Missing”/<code>NA</code>
observations.</p></li>
</ul>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Knowledge scale</span></span>
<span><span class="va">levels_knowledge</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Not knowledgeable at all"</span>, <span class="st">"A little knowledgeable"</span>, <span class="st">"Somewhat knowledgeable"</span>, <span class="st">"Very knowledgeable"</span>, <span class="st">"Extremely knowledgeable"</span><span class="op">)</span></span>
<span><span class="co">## Research Items scale:</span></span>
<span><span class="va">levels_confidence</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Not at all confident"</span>, <span class="st">"Slightly confident"</span>, <span class="st">"Somewhat confident"</span>, <span class="st">"Very confident"</span>, <span class="st">"Extremely confident"</span><span class="op">)</span></span>
<span><span class="co">## Ability Items scale: </span></span>
<span><span class="va">levels_min_ext</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Minimal"</span>, <span class="st">"Slight"</span>, <span class="st">"Moderate"</span>, <span class="st">"Good"</span>, <span class="st">"Extensive"</span><span class="op">)</span></span>
<span><span class="co">## Ethics Items scale:</span></span>
<span><span class="va">levels_agree5</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Strongly disagree"</span>, <span class="st">"Disagree"</span>, <span class="st">"Neither agree nor disagree"</span>, <span class="st">"Agree"</span>, <span class="st">"Strongly agree"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Demographic levels:</span></span>
<span><span class="va">gender_levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Female"</span>,<span class="st">"Male"</span>,<span class="st">"Non-binary"</span>, <span class="st">"Do not wish to specify"</span><span class="op">)</span></span>
<span><span class="va">ethnicity_levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"White (Non-Hispanic/Latino)"</span>, <span class="st">"Asian"</span>, <span class="st">"Black"</span>,  <span class="st">"Hispanic or Latino"</span>, <span class="st">"American Indian or Alaskan Native"</span>,</span>
<span>                      <span class="st">"Native Hawaiian or other Pacific Islander"</span>, <span class="st">"Do not wish to specify"</span><span class="op">)</span></span>
<span><span class="va">first_gen_levels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Yes"</span>, <span class="st">"No"</span>, <span class="st">"I'm not sure"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use mutate() for convert each item in each scale to a factor with vectors above, across() will perform a function for items selected using contains() or can be selected </span></span>
<span><span class="co"># by variables names individually using a character vector: _knowledge or use c("pre_knowledg","post_knowledge")</span></span>
<span><span class="co"># Also create new numeric variables for all the likert scale items and use the suffix '_num' to denote numeric:</span></span>
<span><span class="va">sm_data</span> <span class="op">&lt;-</span> <span class="va">sm_data</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span><span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"_knowledge"</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">.</span>, levels <span class="op">=</span> <span class="va">levels_knowledge</span><span class="op">)</span><span class="op">)</span>, <span class="co"># match each name pattern to select to each factor level</span></span>
<span>                                     <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"_knowledge"</span><span class="op">)</span>, <span class="va">as.numeric</span>, .names <span class="op">=</span> <span class="st">"{.col}_num"</span><span class="op">)</span>, <span class="co"># create new numeric items for all knowledge items</span></span>
<span>                                     <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"research_"</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">.</span>, levels <span class="op">=</span> <span class="va">levels_confidence</span><span class="op">)</span><span class="op">)</span>, </span>
<span>                                     <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"research_"</span><span class="op">)</span>, <span class="va">as.numeric</span>, .names <span class="op">=</span> <span class="st">"{.col}_num"</span><span class="op">)</span>, <span class="co"># create new numeric items for all research items</span></span>
<span>                                     <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"ability_"</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">.</span>, levels <span class="op">=</span> <span class="va">levels_min_ext</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                     <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"ability_"</span><span class="op">)</span>, <span class="va">as.numeric</span>, .names <span class="op">=</span> <span class="st">"{.col}_num"</span><span class="op">)</span>, <span class="co"># create new numeric items for all ability items</span></span>
<span>                                     <span class="co"># select ethics items but not the open_ended responses:</span></span>
<span>                                     <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"ethics_"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"_oe"</span><span class="op">)</span>, <span class="op">~</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">.</span>, levels <span class="op">=</span> <span class="va">levels_agree5</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                                     <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/across.html" class="external-link">across</a></span><span class="op">(</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"ethics_"</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu">tidyselect</span><span class="fu">::</span><span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">contains</a></span><span class="op">(</span><span class="st">"_oe"</span><span class="op">)</span>, <span class="va">as.numeric</span>, .names <span class="op">=</span> <span class="st">"{.col}_num"</span><span class="op">)</span>, <span class="co"># new numeric items for all ethics items</span></span>
<span>                                     <span class="co"># individually convert all demographics to factor variables:</span></span>
<span>                                     gender <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">gender</span>, levels <span class="op">=</span> <span class="va">gender_levels</span><span class="op">)</span>,</span>
<span>                                     ethnicity <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">ethnicity</span>, levels <span class="op">=</span> <span class="va">ethnicity_levels</span><span class="op">)</span>,</span>
<span>                                     first_gen <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">first_gen</span>, levels <span class="op">=</span> <span class="va">first_gen_levels</span><span class="op">)</span>,</span>
<span>                                     <span class="op">)</span></span>
<span><span class="va">sm_data</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 97</span></span></span>
<span><span class="co">#&gt;   respondent_id collector_id start_date end_date   ip_address      email_address</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>001    431<span style="text-decoration: underline;">822</span>954 2024-06-05 2024-06-06 227.224.138.113 coraima59@me…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>002    431<span style="text-decoration: underline;">822</span>954 2024-06-21 2024-06-22 110.241.132.50  mstamm@hermi…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>003    431<span style="text-decoration: underline;">822</span>954 2024-06-14 2024-06-15 165.58.112.64   precious.fei…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>004    431<span style="text-decoration: underline;">822</span>954 2024-06-15 2024-06-16 49.34.121.147   ines52@gmail…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>005    431<span style="text-decoration: underline;">822</span>954 2024-06-15 2024-06-16 115.233.66.80   franz44@hotm…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 95 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 91 more variables: first_name &lt;chr&gt;, last_name &lt;chr&gt;, unique_id &lt;dbl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_knowledge &lt;fct&gt;, post_research_1 &lt;fct&gt;, post_research_2 &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_research_3 &lt;fct&gt;, post_research_4 &lt;fct&gt;, post_research_5 &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_research_6 &lt;fct&gt;, post_research_7 &lt;fct&gt;, post_research_8 &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_ability_1 &lt;fct&gt;, post_ability_2 &lt;fct&gt;, post_ability_3 &lt;fct&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   post_ability_4 &lt;fct&gt;, post_ability_5 &lt;fct&gt;, post_ability_6 &lt;fct&gt;, …</span></span></span></code></pre></div>
<p>The data cleaned in this vignette will be used as the example data in
the vignettes <a href="analysis.html"><code>Data analysis and Statistical Inference</code></a>
and <a href="data_visualization.html"><code>Data Visualization</code></a> to
further showcase all the functions contained in
<code>blackstone</code>.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/zwcrowley" class="external-link">Zack Crowley</a>, <a href="https://blackstoneevaluation.com/" class="external-link">Blackstone Research and Evaluation</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
