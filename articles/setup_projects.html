<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Setup and RStudio Projects • blackstone</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Setup and RStudio Projects">
<title>blackstone R Package</title>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">
    <script>document.title='blackstone R Package';</script><a class="navbar-brand me-2" href="../index.html">blackstone</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/blackstone.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/setup_projects.html">Setup and RStudio Projects</a></li>
    <li><a class="dropdown-item" href="../articles/import_clean.html">Importing and Cleaning Data</a></li>
    <li><a class="dropdown-item" href="../articles/analysis.html">Data Analysis and Statistical Inference</a></li>
    <li><a class="dropdown-item" href="../articles/data_visualization.html">Data Visualization</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/zwcrowley/blackstone/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Setup and RStudio Projects</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/zwcrowley/blackstone/blob/main/vignettes/articles/setup_projects.Rmd" class="external-link"><code>vignettes/articles/setup_projects.Rmd</code></a></small>
      <div class="d-none name"><code>setup_projects.Rmd</code></div>
    </div>

    
    
<p>This vignette will go over best practices and standard workflows for
using <code>R</code> and <code>RStudio</code> for Blackstone Research
and Evaluation (<strong><code>BRE</code></strong>).</p>
<p>This will include:</p>
<ul>
<li><p>A brief introduction to <code>R</code> and
<code>RStudio</code></p></li>
<li><p>A discussion of shared workflow and file management at
<strong><code>BRE</code></strong>.</p></li>
<li><p>Setting up basic global options in <code>RStudio</code>.</p></li>
<li><p>Creating and using <strong><code>RStudio</code>
Projects</strong>.</p></li>
<li><p>Using the <code>here</code> package to build relative file paths
using <code>.Rproj</code> files.</p></li>
</ul>
<div class="section level2">
<h2 id="introduction-and-installation-of-r-and-rstudio">Introduction and Installation of <code>R</code> and
<code>RStudio</code><a class="anchor" aria-label="anchor" href="#introduction-and-installation-of-r-and-rstudio"></a>
</h2>
<p><a href="https://posit.co/products/open-source/rstudio/" class="external-link"><code>RStudio</code></a>
is an integrated development environment (IDE) that is designed to run
<a href="https://www.r-project.org/" class="external-link"><code>R</code></a>, an open-source
programming language for statistical computing and graphics. Both
<code>R</code> and <code>RStudio</code> should be kept up to date, the
most current release for each can be found at the respective links here:
<a href="https://cran.rstudio.com/" class="external-link">“Install <code>R</code>”</a> and <a href="https://posit.co/download/rstudio-desktop/" class="external-link">“Install
<code>RStudio</code>”</a>.</p>
</div>
<div class="section level2">
<h2 id="shared-workflow">Shared Workflow<a class="anchor" aria-label="anchor" href="#shared-workflow"></a>
</h2>
<p>At Blackstone Research and Evaluation, we will strive to utilize best
practices with data science and that starts with implementing a shared
workflow in order to make all of our work reproducible across all of our
projects.</p>
<p>A shared workflow will ensure that anyone at
<strong><code>BRE</code></strong> will be able to open any work product
(Rmarkdown files ‘.Rmd’ or <code>R</code> scripts ‘.R’) and run it on
their own local machine to reproduce the exact same results as the
original author. This ‘code as truth’ approach reduces confusion and
saves time since <code>R</code> is doing the work once the code is
produced and it will be unnecessary to spend a lot of time pointing and
clicking to save files or create figures in other applications.</p>
<p>In order to achieve this, we must use the same standard workflow,
file management, and setup in <code>RStudio</code>.</p>
</div>
<div class="section level2">
<h2 id="file-management">File Management<a class="anchor" aria-label="anchor" href="#file-management"></a>
</h2>
<p>All work products (Rmarkdown files ‘.Rmd’ or <code>R</code> scripts
‘.R’) created in the course of completing a data analysis task,
including any data cleaning and transformation, should be saved to the
correct Blackstone Google Drive project folder.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The Blackstone Google Drive project folder is called
“The Mark Client Projects”.&lt;/p&gt;"><sup>1</sup></a></p>
<p>Our project folders in the Blackstone Google Drive have a standard
folder structure, which looks something like this:<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The &lt;code&gt;blackstone&lt;/code&gt; package contains a folder
structure to emulate a standard Blackstone project folder, I had to
change the naming conventions slightly to include it so the folder names
are a bit different. All spaces are switched to ‘_’ and I removed ‘and’
in some folder titles.&lt;/p&gt;"><sup>2</sup></a></p>
<pre><code><span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">/home/runner/work/_temp/Library/blackstone/2429_DEMO</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Archive</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Phase1_Sales_Finance</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Phase2_Evaluation</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Client_Meeting_Notes</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Concept_Data_Analysis_Guide</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Data</span></span></span>
<span><span class="co">#&gt; │   │   ├── <span style="color: #0000BB; font-weight: bold;">Year1_(2020-2021)</span></span></span>
<span><span class="co">#&gt; │   │   ├── <span style="color: #0000BB; font-weight: bold;">Year2_(2021-2022)</span></span></span>
<span><span class="co">#&gt; │   │   ├── <span style="color: #0000BB; font-weight: bold;">Year3_(2022-2023)</span></span></span>
<span><span class="co">#&gt; │   │   └── <span style="color: #0000BB; font-weight: bold;">Year4_(2023-2024)</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Data_Analysis</span></span></span>
<span><span class="co">#&gt; │   │   ├── <span style="color: #0000BB; font-weight: bold;">Year1_(2020-2021)</span></span></span>
<span><span class="co">#&gt; │   │   ├── <span style="color: #0000BB; font-weight: bold;">Year2_(2021-2022)</span></span></span>
<span><span class="co">#&gt; │   │   ├── <span style="color: #0000BB; font-weight: bold;">Year3_(2022-2023)</span></span></span>
<span><span class="co">#&gt; │   │   └── <span style="color: #0000BB; font-weight: bold;">Year4_(2023-2024)</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Instruments</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">Logic_Model</span></span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">Phase3_Reporting</span></span></span></code></pre>
<p>All raw survey data files should be kept in the correct project year
folder in the <code>Phase 2 - Evaluation/Data</code> folder. So if you
have survey data from ‘Year 4 (2023-2024)’ of a project it should be
save in <code>Phase 2 - Evaluation/Data/Year 4 (2023-2024)</code>. Using
subfolders at the project year level will help to organize data from pre
and post surveys, or multiple surveys with different topics for a given
year.</p>
<p>All data analysis files should be kept in the correct project year
folder in the <code>Phase 2 - Evaluation/Data Analysis</code>
folder.</p>
<p>Later, we will go over how to use <strong><code>RStudio</code>
Projects</strong> to create a subfolder in the correct project year
folder in <code>Phase 2 - Evaluation/Data Analysis</code> folder to
organize these files and how to run all analyses in the Google Drive
folder by importing data from the <code>Phase 2 - Evaluation/Data</code>
subfolders. First, lets turn to some basic setup for
<code>RStudio</code>.</p>
</div>
<div class="section level2">
<h2 id="rstudio-setup">
<code>RStudio</code> Setup<a class="anchor" aria-label="anchor" href="#rstudio-setup"></a>
</h2>
<p>Our workflow for data analysis at <strong><code>BRE</code></strong>
should center around producing <code>R</code> code that is reproducible
for anyone. We need to all maintain <code>RStudio</code> settings which
help to facilitate that process.</p>
<p>The first step is to make sure that each new <code>R</code> session
is a blank slate and nothing that we have done previously carries over
to our current work.</p>
<p>There are two ways to do this:</p>
<ol style="list-style-type: decimal">
<li><p>Either run <code>usethis::use_blank_slate()</code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;If the &lt;code&gt;usethis&lt;/code&gt; package is not installed,
install it with: &lt;code&gt;install.packages("usethis")&lt;/code&gt;&lt;/p&gt;'><sup>3</sup></a> or</p></li>
<li><p>In <code>RStudio</code>, go to the top menu bar and select
‘<strong>Tools</strong>’, then ‘<strong>Global Options</strong>’,
‘<strong>General</strong>’ settings and make sure the
‘<strong>Workspace</strong>’ section (in the blue box) matches the
options in figure 1 below:</p></li>
</ol>
<div class="figure">
<img src="img/r_global_options.png" alt="Figure 1: RStudio Global Options" width="100%"><p class="caption">
Figure 1: RStudio Global Options
</p>
</div>
<p>This will ensure that each new <code>R</code> session starts with any
empty global environment (no data or variables from a previous
session).</p>
<p>Also, it is important to routinely restart your <code>R</code>
session and re-run your code to make sure that everything in code
produces the expected results, figures, and outputs. This can be done by
in <code>RStudio</code> by first saving your current work in the
Rmarkdown file(s) (.Rmd) or <code>R</code> script(s) (.R) file, and then
by selecting ‘<strong>Session</strong>’ in to the top menu bar, clicking
on ‘<strong>Restart R</strong>’.<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;‘&lt;strong&gt;Restart R&lt;/strong&gt;’ keyboard shortcuts are for
&lt;strong&gt;Windows&lt;/strong&gt;: &lt;code&gt;Ctrl+Shift+F10&lt;/code&gt; or for
&lt;strong&gt;Mac&lt;/strong&gt;: &lt;code&gt;Shift+Command+0&lt;/code&gt;&lt;/p&gt;"><sup>4</sup></a> This will clear your global environment and
unload all R packages.</p>
<p>Re-run your code to ensure it includes everything necessary to
complete the assigned data tasks.</p>
</div>
<div class="section level2">
<h2 id="creating-and-using-rstudio-projects">Creating and using RStudio Projects<a class="anchor" aria-label="anchor" href="#creating-and-using-rstudio-projects"></a>
</h2>
<div class="section level3">
<h3 id="introduction-to-rstudio-projects">Introduction to RStudio Projects<a class="anchor" aria-label="anchor" href="#introduction-to-rstudio-projects"></a>
</h3>
<p>In order to have a shared workflow, we have to have a standard way to
set up and organize all of files necessary for project work at
<strong><code>BRE</code></strong>. We also need a way to set the working
directory<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;The terms “folder” and “directory” are used
interchangeably here. The term “working directory” is specific to how
&lt;code&gt;R&lt;/code&gt; works with folders on your local machine. &lt;code&gt;R&lt;/code&gt;
uses the working directory as the starting point to building relative
paths to other folders on your machine.&lt;/p&gt;"><sup>5</sup></a> for each <code>R</code> session that is
reproducible across different users. Using <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code> in code
will work for the original author, but subsequent users will have to
change this file path.</p>
<p><code>RStudio</code> supports this with <strong><code>RStudio</code>
Projects</strong>. An <a href="https://support.posit.co/hc/en-us/articles/200526207-Using-RStudio-Projects" class="external-link"><strong><code>RStudio</code>
Project</strong></a> allows the user to launch <code>RStudio</code> with
its associated folder designated as the current working directory.
Designating a new or existing folder as an <strong><code>RStudio</code>
Project</strong> creates a new file in that folder with the extension
<code>.Rproj</code>, this file saves the settings for the Project, among
other things. In the next section, we will go over how to use this file
to set up relative file paths using the designated Project folder as the
root directory.</p>
<p>Double-clicking on the <code>.Rproj</code>, will launch a fresh
<code>RStudio</code> instance with a new <code>R</code> process that has
the working directory set to the parent folder. This allows the user to
easily switch between projects and not have to worry about setting the
working directory or starting a new <code>R</code> process/clean global
environment. Multiple instances of <code>RStudio</code> can also be
opened to different <strong>Projects</strong> at the same time.</p>
<p>The file browser in each the <code>RStudio</code> instance will show
the current working directory, see figure 2:</p>
<div class="figure">
<img src="img/file_browser.png" alt="Figure 2: RStudio File Browser" width="100%"><p class="caption">
Figure 2: RStudio File Browser
</p>
</div>
<p>It is also shown just above the <strong><code>R</code>
Console</strong> as shown in figure 3:</p>
<div class="figure">
<img src="img/console_wd.png" alt="Figure 3: RStudio Console Working Directory" width="100%"><p class="caption">
Figure 3: RStudio Console Working Directory
</p>
</div>
</div>
<div class="section level3">
<h3 id="creating-an-rstudio-project">Creating an <code>RStudio</code> Project<a class="anchor" aria-label="anchor" href="#creating-an-rstudio-project"></a>
</h3>
<p>To create a new <strong><code>RStudio</code> Project</strong>, go to
the top menu bar and select ‘<strong>File</strong>’, then click on
‘<strong>New Project…</strong>’, which will launch the ‘<strong>New
Project Wizard</strong>’.</p>
<p>On the first page ‘<strong>Create Project</strong>’, Select
‘<strong>New Directory</strong>’:</p>
<div class="figure">
<img src="img/new_proj_01.png" alt="Figure 4.1: New Project Wizard- Create Project" width="100%"><p class="caption">
Figure 4.1: New Project Wizard- Create Project
</p>
</div>
<p>On the second page ‘<strong>Project Type</strong>’, Select
‘<strong>New Project</strong>’:</p>
<div class="figure">
<img src="img/new_proj_02_type.png" alt="Figure 4.2: New Project Wizard- Project Type" width="100%"><p class="caption">
Figure 4.2: New Project Wizard- Project Type
</p>
</div>
<p>On the third page ‘<strong>Create New Project</strong>’, check the
box for ‘<strong>Open in new session</strong>’ in lower-left corner, set
the ‘<strong>Directory name</strong>’ to ‘analysis_{Your Initials}’, In
‘<strong>Create project as subdirectory of</strong>’. click
‘<strong>Browse…</strong>’, then navigate to the correct project folder:
shown below in the next figure 4.4.</p>
<div class="figure">
<img src="img/new_proj_03_dir.png" alt="Figure 4.3: New Project Wizard- Name and Set Parent Folder" width="100%"><p class="caption">
Figure 4.3: New Project Wizard- Name and Set Parent Folder
</p>
</div>
<p>If hypothetically, you were tasked with a data analysis for Year 4
(2023-2024) of a project, you would go set the parent folder (where the
new project folder will be created) to
<code>Phase 2 - Evaluation/Data Analysis/Year 4 (2023-2024)</code>.</p>
<p>After you click on ‘<strong>Browse…</strong>’ next to ‘<strong>Create
project as subdirectory of</strong>’: navigate to the project folder in
the Google Drive then go to the evaluation folder- ‘<strong>Phase 2 -
Evaluation</strong>’, then the ‘<strong>Data Analysis</strong>’ then
‘<strong>Year 4 (2023-2024)</strong>’ and click
‘<strong>Open</strong>’</p>
<div class="figure">
<img src="img/new_proj_04_browse.png" alt="Figure 4.4: Browse to Correct Project Folder" width="100%"><p class="caption">
Figure 4.4: Browse to Correct Project Folder
</p>
</div>
<p>Finally, after setting the correct parent folder, you will be back on
the third page ‘<strong>Create New Project</strong>’.</p>
<p>If you have completed the above steps, the settings should resemble
figure 4.5 below and you can proceed to click ‘<strong>Create
Project</strong>’ in the lower-right corner. This will launch the new
Project named ‘analysis_{Your Initials}’</p>
<div class="figure">
<img src="img/new_proj_05_create.png" alt="Figure 4.5: New Project Wizard- Create New Project" width="100%"><p class="caption">
Figure 4.5: New Project Wizard- Create New Project
</p>
</div>
<p>Another way to create an <strong><code>RStudio</code>
Project</strong> is by using the <code>rstudioapi</code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The code below uses the &lt;a href="https://rstudio.github.io/rstudioapi/" class="external-link"&gt;&lt;code&gt;rstudioapi&lt;/code&gt;
package&lt;/a&gt;, if it is not installed, install it with:
&lt;code&gt;install.packages("rstudioapi")&lt;/code&gt;, best practice is to
&lt;em&gt;never&lt;/em&gt; load the package into memory (Do not run
library(rstudioapi)), but to attach each function like:
&lt;code&gt;package::function()&lt;/code&gt;&lt;/p&gt;'><sup>6</sup></a> package, which allows
you to interact with RStudio with <code>R</code> code.</p>
<p>The code below creates a new folder, then creates the
<code>.Rproj</code> file with the same name, running the last line of
code will open the new <strong><code>RStudio</code> Project</strong> in
a new <code>RStudio</code> instance:<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The code below uses the &lt;a href="https://fs.r-lib.org/" class="external-link"&gt;&lt;code&gt;fs&lt;/code&gt; package&lt;/a&gt; which helps
with file management, if it is not installed, install it with:
&lt;code&gt;install.packages("fs")&lt;/code&gt;&lt;/p&gt;'><sup>7</sup></a></p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># file path for new `analysis` folder:</span></span>
<span><span class="va">analysis_fp</span> <span class="op">&lt;-</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path.html" class="external-link">path</a></span><span class="op">(</span><span class="st">"Phase 2 - Evaluation"</span>, <span class="st">"Data Analysis"</span>, <span class="st">"Year 4 (2023-2024)"</span>, <span class="st">"analysis"</span><span class="op">)</span></span>
<span><span class="co"># Create a new folder named `analysis` in for "Data Analysis"/Year4_(2023-2024):</span></span>
<span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/create.html" class="external-link">dir_create</a></span><span class="op">(</span><span class="va">analysis_fp</span><span class="op">)</span> <span class="co"># Data Analysis Year 4</span></span>
<span></span>
<span><span class="co"># Creating a new RStudio Project in the `analysis` folder:</span></span>
<span><span class="fu">rstudioapi</span><span class="fu">::</span><span class="fu">initializeProject</span><span class="op">(</span>path <span class="op">=</span> <span class="va">analysis_fp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Open the new project in a a new `RStudio` instance:</span></span>
<span><span class="fu">rstudioapi</span><span class="fu">::</span><span class="fu">openProject</span><span class="op">(</span>path <span class="op">=</span> <span class="va">analysis_fp</span>, newSession <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>Now that we have an <strong>RStudio Project</strong> we can use it to
save all of the files necessary for a data analysis task inside its
folder and we don’t have to worry about using <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code> to
manage the working directory.</p>
<p>It is also</p>
</div>
</div>
<div class="section level2">
<h2 id="managing-file-paths-with-the-here-package">Managing File Paths with the <code>here</code> Package<a class="anchor" aria-label="anchor" href="#managing-file-paths-with-the-here-package"></a>
</h2>
<p>In order to highlight another advantage for working in an
<strong>RStudio Project</strong>, let’s say we were tasked with the data
analysis of a hypothetical Blackstone project. The project folder named
<code>2429_DEMO</code> in the Blackstone Google Drive and the analysis
is for its fourth year (<code>Year 4 (2023-2024)</code>).</p>
<p>We have completed the above steps to create an <strong>RStudio
Project</strong> in the
<code>Phase 2 - Evaluation/Data Analysis/Year 4 (2023-2024)</code>
folder which we named ‘analysis’ as shown in the directory tree below,
there is a subfolder of
<code>Phase 2 - Evaluation/Data Analysis/Year 4 (2023-2024)</code> named
‘analysis’ with an <strong>RStudio Project</strong> file named
<code>analysis.Rproj</code>. We have also created an Rmarkdown file in
the same folder called <code>report.Rmd</code>.</p>
<pre><code><span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">/home/runner/work/_temp/Library/blackstone/2429_DEMO/Phase2_Evaluation/Data_Analysis</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Year1_(2020-2021)</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Year2_(2021-2022)</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Year3_(2022-2023)</span></span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">Year4_(2023-2024)</span></span></span>
<span><span class="co">#&gt;     └── <span style="color: #0000BB; font-weight: bold;">analysis</span></span></span>
<span><span class="co">#&gt;         ├── analysis.Rproj</span></span>
<span><span class="co">#&gt;         └── <span style="color: #00BB00;">report.Rmd</span></span></span></code></pre>
<p>To launch the <strong><code>RStudio</code> Project</strong> we can
either go to the top menu bar in <code>RStudio</code>, click
‘<strong>File</strong>’, ‘<strong>Open Project…</strong>’ and navigate
to the <code>analysis.Rproj</code> and click ‘<strong>Open</strong>’ or
go to your operating system’s File Finder/Explorer navigate to the
<code>analysis.Rproj</code> and double-click it.</p>
<p>To confirm which <strong><code>RStudio</code> Project</strong> is
open in your current <code>RStudio</code> instance go to the top-right
corner of <code>RStudio</code>.</p>
<div class="figure">
<img src="img/current_proj.png" alt="Image of RStudio top-right corner of IDE with arrow pointing out the display of the RStudio project that is currently open." width="100%"><p class="caption">
Figure 5: Current RStudio Project (top-right corner of IDE)
</p>
</div>
<p>If you click on the current <strong><code>RStudio</code>
Project</strong> shown above, a drop-down menu gives you options to
switch between <strong>Projects</strong> or open new
<code>RStudio</code> instances to run multiple projects at once.</p>
<p>Now, if we have opened the <strong><code>RStudio</code>
Project</strong> file <code>analysis.Rproj</code> our working directory
will be set to the analysis <code>folder</code> with this file path:
/home/runner/work/_temp/Library/blackstone/2429_DEMO/Phase2_Evaluation/Data_Analysis/analysis</p>
<p>But that is the file path on <em>my</em> local machine, it would
differ based on the location of the <code>2429_DEMO</code> folder
because how your Google Drive Desktop is set up (different user names or
shortcut IDs). This also creates an issue if we want to navigate to the
<code>Data</code> folder in our code to import data for analysis. How do
we write out a file path that is stable over time and for different
users?</p>
<div class="section level3">
<h3 id="introduction-to-the-here-package">Introduction to the <code>here</code> Package<a class="anchor" aria-label="anchor" href="#introduction-to-the-here-package"></a>
</h3>
<p>The <a href="https://here.r-lib.org" class="external-link"><code>here</code></a> package
solves this issue by using <strong><code>RStudio</code> Project</strong>
files (<code>.Rproj</code>) to create relative file paths. In
<code>R</code> anytime we set the working directory (either by using
<code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">setwd()</a></code> or by opening an <strong><code>RStudio</code>
Project</strong>), we can reference file paths using paths relative to
the working directory using <code><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd()</a></code>. But if that file path
changes, either by moving folders or by the code running on different
machines, this method will no longer work.</p>
<p>The <code>here</code> packages provides a way to always reference the
location of a specified <strong><code>RStudio</code> Project</strong>
files (<code>.Rproj</code>) as the <em>root</em> directory for relative
file paths, even if the working directory is switched to a subfolder of
an <strong><code>RStudio</code> Project</strong> folder (which is the
case when knitting an .Rmd file).</p>
<p>The <code>here</code> package has two simple functions which allow us
build reproducible file paths.</p>
</div>
<div class="section level3">
<h3 id="using-the-here-package">Using the <code>here</code> Package<a class="anchor" aria-label="anchor" href="#using-the-here-package"></a>
</h3>
<p>If the <code>here</code> package is not installed, install it with:
<code>install.packages("here")</code></p>
<p>The first step is to set the current location of the file you are
working in using <code><a href="https://here.r-lib.org//reference/i_am.html" class="external-link">here::i_am()</a></code><a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content="&lt;p&gt;This call must be done before loading the
&lt;code&gt;here&lt;/code&gt; package so you must attach package to the function
using two colons like this &lt;code&gt;package::function()&lt;/code&gt;.&lt;/p&gt;"><sup>8</sup></a> with a relative path
to the project root directory. This has to be done at the beginning of
an <code>R</code> script (‘.R’) or first code chunk in an Rmarkdown file
(‘.Rmd’).</p>
<p>If we were working in the file <code>report.Rmd</code> contained
inside the <code>analysis</code> folder that would look like this:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/i_am.html" class="external-link">i_am</a></span><span class="op">(</span><span class="st">"report.Rmd"</span><span class="op">)</span></span>
<span><span class="co">#&gt; here() starts at /home/runner/work/_temp/Library/blackstone/2429_DEMO/Phase2_Evaluation/Data_Analysis/Year4_(2023-2024)/analysis</span></span></code></pre></div>
<p><code><a href="https://here.r-lib.org//reference/i_am.html" class="external-link">here::i_am()</a></code> finds and returns the project root
directory. Since the file <code>report.Rmd</code> is contained alongside
the <code>analysis.Rproj</code> file inside the <code>analysis</code>
folder, the call above returns the file path to the
<code>analysis</code> folder.</p>
<p>Once we have called <code><a href="https://here.r-lib.org//reference/i_am.html" class="external-link">here::i_am()</a></code>, we can then load the
<code>here</code> package and use the <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here()</a></code> to again
return the project root folder.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://here.r-lib.org/" class="external-link">here</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "/home/runner/work/_temp/Library/blackstone/2429_DEMO/Phase2_Evaluation/Data_Analysis/Year4_(2023-2024)/analysis"</span></span></code></pre></div>
<p>To be clear, the <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here()</a></code> function differs from just
returning the current working directory. In fact, if you change the
working directory and <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here()</a></code> will still return the project
root directory set by the initial call to <code><a href="https://here.r-lib.org//reference/i_am.html" class="external-link">here::i_am()</a></code>.</p>
</div>
<div class="section level3">
<h3 id="relative-file-paths-with-here">Relative File Paths with <code>here()</code><a class="anchor" aria-label="anchor" href="#relative-file-paths-with-here"></a>
</h3>
<p>Now, we can use <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here()</a></code> to build relative paths to read
and write data. This works by including the folder and file destination
inside the function, either as a single string or separated by commas.
If we wanted to build a path to the <code>Data</code> folder in our
example project folder, let’s see how that would work.</p>
<p>First, it is helpful to review the folder structure:</p>
<pre><code><span><span class="co">#&gt; <span style="color: #0000BB; font-weight: bold;">/home/runner/work/_temp/Library/blackstone/2429_DEMO/Phase2_Evaluation</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Client_Meeting_Notes</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Concept_Data_Analysis_Guide</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Data</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Year1_(2020-2021)</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Year2_(2021-2022)</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Year3_(2022-2023)</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">Year4_(2023-2024)</span></span></span>
<span><span class="co">#&gt; │       ├── <span style="color: #0000BB; font-weight: bold;">clean_data</span></span></span>
<span><span class="co">#&gt; │       │   └── sm_data_clean.csv</span></span>
<span><span class="co">#&gt; │       ├── <span style="color: #0000BB; font-weight: bold;">post_data</span></span></span>
<span><span class="co">#&gt; │       │   └── sm_data_post.csv</span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">pre_data</span></span></span>
<span><span class="co">#&gt; │           └── sm_data_pre.csv</span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Data_Analysis</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Year1_(2020-2021)</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Year2_(2021-2022)</span></span></span>
<span><span class="co">#&gt; │   ├── <span style="color: #0000BB; font-weight: bold;">Year3_(2022-2023)</span></span></span>
<span><span class="co">#&gt; │   └── <span style="color: #0000BB; font-weight: bold;">Year4_(2023-2024)</span></span></span>
<span><span class="co">#&gt; │       └── <span style="color: #0000BB; font-weight: bold;">analysis</span></span></span>
<span><span class="co">#&gt; │           ├── analysis.Rproj</span></span>
<span><span class="co">#&gt; │           └── <span style="color: #00BB00;">report.Rmd</span></span></span>
<span><span class="co">#&gt; ├── <span style="color: #0000BB; font-weight: bold;">Instruments</span></span></span>
<span><span class="co">#&gt; └── <span style="color: #0000BB; font-weight: bold;">Logic_Model</span></span></span></code></pre>
<p>In order to build a path from the
<code>Phase2_EvaluationData_Analysis/Year4_(2023-2024)/analysis</code>
(which is out top-level project directory) to the
<code>Phase2_Evaluation/Data</code> folder, we need to go “up” three
levels which is done with file paths using “..” like this:
<code>../../../</code></p>
<p>Using <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here()</a></code> we can build a relative path from the
<code>analysis</code> to the `Data folder:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Setting up file path to the Data folder for Year 4:</span></span>
<span><span class="va">data_fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="st">"../../../Data"</span><span class="op">)</span> <span class="co"># or can be written as: here("..", ".." ,".." ,"Data")</span></span>
<span><span class="va">data_fp</span></span>
<span><span class="co">#&gt; [1] "/home/runner/work/_temp/Library/blackstone/2429_DEMO/Phase2_Evaluation/Data_Analysis/Year4_(2023-2024)/analysis/../../../Data"</span></span></code></pre></div>
<p>This path can be added to other file paths to complete the desired
path to any number of files within the <code>Data</code> folder.</p>
<p>Returning to the original example evaluation folder, if we want to
read in data from the <code>Data/Year 4 (2023-2024)</code> folder to run
analyses in the <code>report.Rmd</code> we can set up a series of file
paths using <code><a href="https://here.r-lib.org//reference/here.html" class="external-link">here()</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Setting up file path to the Data folder for Year 4:</span></span>
<span><span class="va">data_year4_fp</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="va">data_fp</span>, <span class="st">"Year4_(2023-2024)"</span><span class="op">)</span> <span class="co"># or can be written as: here("..", ".." ,".." ,"Data", "Year4_(2023-2024)")</span></span>
<span><span class="va">data_year4_fp</span></span>
<span><span class="co">#&gt; [1] "/home/runner/work/_temp/Library/blackstone/2429_DEMO/Phase2_Evaluation/Data_Analysis/Year4_(2023-2024)/analysis/../../../Data/Year4_(2023-2024)"</span></span></code></pre></div>
<p>We can re-use that file path to build the rest of the path needed to
read in the clean data<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The code below uses the &lt;a href="https://readr.tidyverse.org/" class="external-link"&gt;&lt;code&gt;readr&lt;/code&gt; package&lt;/a&gt;, if
it is not installed, install it with:
&lt;code&gt;install.packages("readr")&lt;/code&gt;&lt;/p&gt;'><sup>9</sup></a> from Year 4:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># File path to clean data from Year 4 named: "sm_data_clean.csv"</span></span>
<span><span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="va">data_year4_fp</span>, <span class="st">"clean_data"</span>, <span class="st">"sm_data_clean.csv"</span><span class="op">)</span> </span>
<span><span class="co">#&gt; [1] "/home/runner/work/_temp/Library/blackstone/2429_DEMO/Phase2_Evaluation/Data_Analysis/Year4_(2023-2024)/analysis/../../../Data/Year4_(2023-2024)/clean_data/sm_data_clean.csv"</span></span>
<span><span class="co"># or can be written as: here("..", ".." ,".." ,"Data", "Year4_(2023-2024)", "clean_data", "sm_data_clean.csv")</span></span>
<span></span>
<span><span class="co"># Reading in the clean data from Year 4 named: "sm_data_clean.csv"</span></span>
<span><span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html" class="external-link">read_csv</a></span><span class="op">(</span>file <span class="op">=</span> <span class="fu"><a href="https://here.r-lib.org//reference/here.html" class="external-link">here</a></span><span class="op">(</span><span class="va">data_year4_fp</span>, <span class="st">"clean_data"</span>, <span class="st">"sm_data_clean.csv"</span><span class="op">)</span>, show_col_types <span class="op">=</span> <span class="cn">FALSE</span>, n_max <span class="op">=</span> <span class="fl">3</span>, col_select <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">6</span><span class="op">:</span><span class="fl">12</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 8</span></span></span>
<span><span class="co">#&gt;   respondent_id email_address      first_name last_name unique_id post_knowledge</span></span>
<span><span class="co">#&gt;           <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>001 coraima59@medhurs… Dellia     Collier    24<span style="text-decoration: underline;">290</span>001 A little know…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>002 mstamm@hermiston.… Etter      Williams…  24<span style="text-decoration: underline;">290</span>002 Not knowledge…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span>  <span style="text-decoration: underline;">114</span>628<span style="text-decoration: underline;">000</span>003 precious.feil@gma… Marin      Lind       24<span style="text-decoration: underline;">290</span>003 Extremely kno…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 2 more variables: post_research_1 &lt;chr&gt;, post_research_2 &lt;chr&gt;</span></span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="try-yourself">Try Yourself<a class="anchor" aria-label="anchor" href="#try-yourself"></a>
</h2>
<p>The <code>blackstone</code> R package installation comes with a full
example project directory, with the <code>analysis</code> folder
containing <code>analysis.Proj</code> and the <code>report.Rmd</code>.
The final code chunk below allows you to easily access the files where
ever they are installed on your local machine. Any edits you make to
these files will be lost when you re-install/update the
<code>blackstone</code> R package.</p>
<p>Run the code below to open the example project in a new
<code>RStudio</code> instance and then open <code>report.Rmd</code> by
copying the next line of code into the console in the new
<code>RStudio</code> instance:<a class="footnote-ref" tabindex="0" data-bs-toggle="popover" data-bs-content='&lt;p&gt;The code below uses the &lt;a href="https://rstudio.github.io/rstudioapi/" class="external-link"&gt;&lt;code&gt;rstudioapi&lt;/code&gt;
package&lt;/a&gt;, if it is not installed, install it with:
&lt;code&gt;install.packages("rstudioapi")&lt;/code&gt;, best practice is to
&lt;em&gt;never&lt;/em&gt; load the package into memory (Do not run
library(rstudioapi)), but to attach each function like:
&lt;code&gt;package::function()&lt;/code&gt;&lt;/p&gt;'><sup>10</sup></a></p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Code to open the example `analysis` `RStudio` Project (will launch in a new `RStudio` instance):</span></span>
<span><span class="fu">rstudioapi</span><span class="fu">::</span><span class="fu">openProject</span><span class="op">(</span>path <span class="op">=</span> <span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/path_package.html" class="external-link">path_package</a></span><span class="op">(</span><span class="st">"2429_DEMO/Phase2_Evaluation/Data_Analysis/Year4_(2023-2024)/analysis/analysis.Rproj"</span>, package <span class="op">=</span> <span class="st">"blackstone"</span><span class="op">)</span>,</span>
<span>                        newSession <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Code to open "report.Rmd" (must be in the `analysis` `RStudio` Project):</span></span>
<span><span class="fu">rstudioapi</span><span class="fu">::</span><span class="fu">navigateToFile</span><span class="op">(</span></span>
<span>  file <span class="op">=</span> <span class="st">"report.Rmd"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="additional-resources-for-r-rstudio-and-project-workflows">Additional Resources for <code>R</code>, <code>RStudio</code>, and
Project Workflows<a class="anchor" aria-label="anchor" href="#additional-resources-for-r-rstudio-and-project-workflows"></a>
</h2>
<ul>
<li><p><em>R for data science</em>: <a href="https://r4ds.hadley.nz/workflow-scripts.html#projects" class="external-link">“Workflow:
6.2 Projects”</a> chapter by Hadley Wickham</p></li>
<li><p><em>What They Forgot to Teach You About R</em>: <a href="https://rstats.wtf/projects.html" class="external-link">“3 Project-oriented
workflow”</a> chapter by Jenny Bryan, Jim Hester, Shannon Pileggi, and
E. David Aja</p></li>
<li><p><a href="https://www.tidyverse.org/blog/2017/12/workflow-vs-script/" class="external-link">“Project-oriented
workflow”</a> Tidyverse Blog Post by Jenny Bryan</p></li>
</ul>
</div>

  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/zwcrowley" class="external-link">Zack Crowley</a>, <a href="https://blackstoneevaluation.com/" class="external-link">Blackstone Research and Evaluation</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
